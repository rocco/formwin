(function(b){b.formwin={version:"0.1.0",preloadedImages:[],defaults:{formWinClassSel:"",formWinSelector:"select, textarea, input[type=text], input[type=password], input[type=checkbox], input[type=radio], input[type=button]",activeClass:"active",focusClass:"focus",hoverClass:"hover",disabledClass:"disabled",checkedClass:"checked",placeholderColor:"gray",selectedvalueBorders:46,imagePath:"",autoInit:!1,autoFixlabels:!1,leftLabelOffset:0,rightLabelOffset:0}};var f=!1,h=!1,k={select:function(a,c){var d=
b("div.selectedvalue",a.parent()),e=function(a){a="undefined"!==typeof a.thisEl?a.thisEl:b(this);b("div.selectedvalue",a.parent()).html((a.find(":selected:first")||a.find("option:first")).html());a.parent().removeClass(c.activeClass)};d.width(a.width());a.width("100%").height("100%");e({thisEl:a});a.bind("change",e);m(d);return a},textarea:function(b,c){g(c)},text:function(b,c){g(c)},checkbox:function(a,c){var d=function(a){a="undefined"!==typeof a.thisEl?a.thisEl:b(this);var d=a.parent();!0===a.is(":checked")?
d.addClass(c.checkedClass):d.removeClass(c.checkedClass);d.removeClass(c.hoverClass);d.removeClass(c.focusClass)};d({thisEl:a});a.bind("click",d);a.bind("touchend",d)},radio:function(a,c){var d=function(a){a="undefined"!==typeof a.thisEl?a.thisEl:b(this);var d=a.parent();!0===a.is(":checked")&&(b("input[name="+a.attr("name")+"]:radio").each(function(){b(this).parent().removeClass(c.checkedClass)}),d.addClass(c.checkedClass));d.removeClass(c.hoverClass);d.removeClass(c.focusClass)};d({thisEl:a});a.bind("click",
d);a.bind("touchend",d)}},l=function(a,c){var d=b(a).attr("placeholder");"undefined"!==typeof d&&""!==d&&(d===b(a).val()&&b(a).val(""),""===b(a).val()&&b(a).val(d).css("color",c.placeholderColor).addClass("formwin-showplaceholder"))},g=function(a){if(!1!==h)return!0;b('<img src="'+a.imagePath+'formwin-input-active.png">').load(function(){b.formwin.preloadedImages.push("active")});b('<img src="'+a.imagePath+'formwin-input-hover.png">').load(function(){b.formwin.preloadedImages.push("hover")});b('<img src="'+
a.imagePath+'formwin-input-focus.png">').load(function(){b.formwin.preloadedImages.push("focus")});b('<img src="'+a.imagePath+'formwin-input-negative-focus.png">').load(function(){b.formwin.preloadedImages.push("negative-focus")});b('<img src="'+a.imagePath+'formwin-input-negative-hover.png">').load(function(){b.formwin.preloadedImages.push("negative-hover")});b('<img src="'+a.imagePath+'formwin-input-negative.png">').load(function(){b.formwin.preloadedImages.push("negative")});b('<img src="'+a.imagePath+
'formwin-input-normal.png">').load(function(){b.formwin.preloadedImages.push("normal")});b('<img src="'+a.imagePath+'formwin-input-positive-focus.png">').load(function(){b.formwin.preloadedImages.push("positive-focus")});b('<img src="'+a.imagePath+'formwin-input-positive-hover.png">').load(function(){b.formwin.preloadedImages.push("positive-hover")});b('<img src="'+a.imagePath+'formwin-input-positive.png">').load(function(){b.formwin.preloadedImages.push("positive")});h=!0;return g},m=function(a){var c=
function(){return!1};b(a).each(function(){this.onselectstart=this.ondragstart=c;b(this).mousedown(c).css({MozUserSelect:"none"})})};b.formwin.init=function(a){a=b.extend({},b.formwin.defaults,a);b.browser.msie&&9>b.browser.version&&(f=!0);b("div.formwinbutton").each(function(){var c=this;!0===b("input, button",this).is(":disabled")?b(c).addClass(a.disabledClass):b(c).removeClass(a.disabledClass);b("input, button",this).focus(function(){b(c).addClass(a.focusClass)}).blur(function(){b(c).removeClass(a.focusClass);
b(c).removeClass(a.activeClass)}).on("mouseenter",function(){b(c).addClass(a.hoverClass)}).on("mouseleave",function(){b(c).removeClass(a.hoverClass);b(c).removeClass(a.activeClass)}).on("keydown mousedown touchbegin",function(){b(c).addClass(a.activeClass)}).on("keyup mouseup touchend",function(){b(c).removeClass(a.activeClass)})});b("label"+a.formWinClassSel).each(function(){var c="",d="",e=this;b(this).children(a.formWinSelector).each(function(){c=b(this)[0].outerHTML.match(/[^<][^ ]*/)[0].toLowerCase();
!0!==f||"textarea"!==c&&"input"!==c||"undefined"===typeof b(this).attr("placeholder")||(b(this).data("formwinOriginalColor",b(this).css("color")),l(this,a));b(this).focus(function(){b(e).addClass(a.focusClass);!0===f&&"undefined"!==typeof b(this).attr("placeholder")&&b(this).hasClass("formwin-showplaceholder")&&b(this).val("").css("color",b(this).data("formwinOriginalColor"))}).blur(function(){b(e).removeClass(a.focusClass);b(e).removeClass(a.activeClass);!0===f&&"undefined"!==typeof b(this).attr("placeholder")&&
(""===b(this).val()?l(this,a):b(this).removeClass("formwin-showplaceholder"))}).on("mouseenter",function(){b(e).addClass(a.hoverClass)}).on("mouseleave",function(){b(e).removeClass(a.hoverClass);b(e).removeClass(a.activeClass)}).on("keydown mousedown touchbegin",function(){b(e).addClass(a.activeClass)}).on("keyup mouseup touchend",function(){b(e).removeClass(a.activeClass)});!0===b(this).is(":disabled")?b(e).addClass(a.disabledClass):b(e).removeClass(a.disabledClass);d="input"===c?b(this).attr("type").toLowerCase():
c;if("undefined"!==typeof k[d])k[d](b(this),a)})})};b.formwin.fixlabels=function(a){a=b.extend({},b.formwin.defaults,a);b("label"+a.formWinClassSel+".above, label"+a.formWinClassSel+".below").each(function(){var a=b("span",this),d=a.css("white-space"),e=0,f=0;a.css("white-space","nowrap");e=a.width();f="-"+a.outerHeight()+"px";b(this).hasClass("above")&&a.css("top",f);b(this).hasClass("below")&&a.css("bottom",f);a.css("white-space",d);e>b("textarea, input, select",this).width()&&a.parent().css("width",
e+"px")});b("label"+a.formWinClassSel+".left, label"+a.formWinClassSel+".right").each(function(){var c=b("span",this).css("white-space","nowrap"),d=c.width(),e="right";b(this).hasClass("left")&&(e="left");b(this).css("margin-"+e,d+10+a[e+"LabelOffset"]+"px");c.css(e,-1*(d+10+a[e+"LabelOffset"])+"px")})}})(jQuery);$.formwin.defaults=$.extend($.formwin.defaults,$.formwinSettings);delete $.formwinSettings;
!0===$.formwin.defaults.autoInit&&($(document).ready(function(){$.formwin.init()}),!0===$.formwin.defaults.autoFixlabels&&$(document).ready(function(){$.formwin.fixlabels()}));
